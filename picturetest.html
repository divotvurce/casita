<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxusní Ubytování</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        body {
         background-color: #f8f8f8;
            /* Nový styl pro pozadí s texturou kávy */
            background-image: url('texture1.png'); 
            background-repeat: repeat;
            background-size: 400px; /* Nastavuje velikost opakujícího se obrázku */
            background-attachment: fixed; /* Zajišťuje, že se textura neposouvá při rolování */
            font-family: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
        }
        .hero-section {
            background-image: url('https://picsum.photos/1920/1080?random=1');
            background-size: cover;
            background-position: center;
        }
        .cta-section {
            background-image: url('https://picsum.photos/1920/1080?random=6');
            background-size: cover;
            background-position: center;
        }
        .image-reveal-container {
    overflow: hidden;
}
.distort-image {
    width: 100%;
    cursor: pointer;
    /* Aplikace SVG filtru */
    filter: url(#distortion-filter);
}
.title-mask {
    overflow: hidden; /* Vše, co přeteče, bude skryto */
}
.word-wrapper {
    display: inline-block; /* Aby se slova řadila vedle sebe */
    overflow: hidden;      /* Skryje vše, co je mimo tento obal */
    vertical-align: bottom; /* Zarovnání pro lepší konzistenci */
}
  .scroll-text span {
    display: inline-block;
    color: #d1d5db; /* Tailwind gray-300 */
    transition: color 0.3s;
  }
    </style>
</head>
<body>
    <section id="section3" class="py-24 px-8 md:px-24 flex flex-col md:flex-row items-center justify-center space-y-12 md:space-y-0 md:space-x-8 text-white">
        <h1 class="creative-title text-black">Jedinečný zážitek</h1>
<div class="image-reveal-container">
    <img src="https://picsum.photos/800/1000?random=2" alt="Elegantní interiér" class="reveal-image">
</div>
</section>
<svg style="display:none">
  <defs>
    <filter id="distortion-filter">
      <feTurbulence type="fractalNoise" baseFrequency="0 0" numOctaves="1" result="warp"/>
      <feDisplacementMap xChannelSelector="R" yChannelSelector="G" scale="60" in="SourceGraphic" in2="warp"/>
    </filter>
  </defs>
</svg>
<section id="section3" class="py-24 px-8 md:px-24 flex flex-col md:flex-row items-center justify-center space-y-12 md:space-y-0 md:space-x-8 text-white">
    <div class="title-mask">
    <h1 class="masked-title text-black">Klid, inspirace, luxus.</h1>
    <h1 class="blur-headline text-5xl md:text-7xl lg:text-8xl font-serif z-10 text-black text-center">
    Jedinečný zážitek
</h1>
</div>
<img src="https://picsum.photos/800/600?random=7" alt="Sauna" class="distort-image">
</section>
<section class="py-40 bg-white">
  <h2 class="scroll-text text-6xl font-bold text-gray-300 text-center">
    Náš příběh
  </h2>
</section>

<section class="py-40 bg-gray-100">
  <p class="text-center text-lg">
    Tady je obsah stránky, který posouvá efekt.
  </p>
</section>
<section class="py-40 bg-white">
  <h2 class="scroll-text text-5xl font-bold text-center leading-snug">
    <span>Harmonie</span> 
    <span>designu</span> 
    <span>a</span> 
    <span>přírody</span>
  </h2>
</section>

<section class="py-40 bg-gray-100">
  <p class="text-center text-lg">
    Tady pokračuje stránka pro scroll efekt.
  </p>
</section>


  <!-- SCRIPT -->
  <script>
    
gsap.from(".reveal-image", {
    scrollTrigger: {
        trigger: ".image-reveal-container",
        start: "top 80%",
        toggleActions: "play none none reverse",
        scrub: 1 // Efekt se bude plynule vázat na pozici scrollbaru
    },
    clipPath: "inset(0 100% 0 0)", // Začíná plně "zastřižený" zprava
    scale: 1.2, // Začíná mírně přiblížený
    duration: 2,
    ease: "power3.inOut"
});

const distortImage = document.querySelector(".distort-image");
// Cílem je samotný prvek <feTurbulence> uvnitř SVG filtru
const turbulence = document.querySelector("#distortion-filter feTurbulence");

// GSAP animace, která se spustí při najetí myší
distortImage.addEventListener("mouseenter", () => {
    gsap.to(turbulence, {
        // Animujeme atribut "baseFrequency"
        attr: { baseFrequency: "0.01 0.005" },
        duration: 0.4,
        ease: "power2.out"
    });
});

  gsap.registerPlugin(ScrollTrigger);

  gsap.to(".scroll-text", {
    scrollTrigger: {
      trigger: ".scroll-text",
      start: "top 80%",   // kdy začít
      end: "top 20%",     // kdy skončit
      scrub: true
    },
    color: "#000",  // z šedé na černou
    ease: "none"
  });

// Animace, která vrátí efekt do původního stavu
distortImage.addEventListener("mouseleave", () => {
    gsap.to(turbulence, {
        attr: { baseFrequency: "0 0" },
        duration: 1,
        ease: "power2.out"
    });
});
// Cílový element
const title = document.querySelector('.creative-title');

// Rozdělení textu na písmena obalená ve span
const text = title.textContent;
title.innerHTML = ''; // Vyprázdníme původní text
text.split('').forEach(char => {
    // Pokud je znak mezera, použijeme pevnou mezeru, aby se neztratila
    const charElement = char === ' ' ? '&nbsp;' : char;
    title.innerHTML += `<span class="letter" style="display: inline-block;">${charElement}</span>`;
});

// Animace pomocí GSAP
gsap.from(".letter", {
    scrollTrigger: {
        trigger: ".creative-title",
        start: "top 80%", // Kdy se animace spustí
        toggleActions: "play none none reverse"
    },
    y: 100,             // Začíná 100px pod svou pozicí
    opacity: 0,         // Začíná neviditelný
    scale: 1.5,         // Začíná 1.5x větší
    rotationZ: "random(-25, 25)", // Náhodná rotace od -25 do 25 stupňů
    duration: 1,        // Délka animace jednoho písmene
    ease: "power3.out", // Typ "uvolnění" animace
    stagger: {          // Nastavení pro postupné spouštění
        each: 0.04,     // Zpoždění mezi písmeny
        from: "random"  // Pořadí není zleva doprava, ale náhodné
    }
});
gsap.from(".masked-title", {
    scrollTrigger: {
        trigger: ".title-mask",
        start: "top 80%",
        toggleActions: "play none none reverse"
    },
    yPercent: 100, // Začíná 100% své výšky pod svou pozicí
    opacity: 0,
    duration: 2,
    ease: "power4.inOut"
});

gsap.registerPlugin(ScrollTrigger);

// Cílíme na nadpis, který chceme animovat
const headline = document.querySelector(".blur-headline");

// --- Skript pro automatické rozdělení na slova ---
// Získáme text a rozdělíme ho na pole slov
const words = headline.textContent.split(" ");
// Vyprázdníme původní obsah nadpisu
headline.textContent = "";

// Pro každé slovo vytvoříme potřebnou strukturu <div><span>...</span></div>
words.forEach((word, index) => {
    const wordWrapper = document.createElement("div");
    wordWrapper.classList.add("word-wrapper");

    const wordSpan = document.createElement("span");
    wordSpan.classList.add("word-span");
    wordSpan.textContent = word;

    wordWrapper.appendChild(wordSpan);
    headline.appendChild(wordWrapper);

    // Přidáme mezeru za každým slovem, kromě posledního
    if (index < words.length - 1) {
        headline.appendChild(document.createTextNode(" "));
    }
});
// --- Konec skriptu pro rozdělení ---


// ✨ --- Samotná GSAP animace --- ✨
gsap.from(".word-span", {
    scrollTrigger: {
        trigger: ".blur-headline",
        start: "top 80%", // Kdy se animace spustí
        toggleActions: "play none none reverse",
    },
    yPercent: 100,             // 1. POHYB: Začíná 100% své výšky pod svou pozicí (schovaný v masce)
    filter: "blur(12px)",      // 2. ROZMAZÁNÍ: Začíná s rozmazáním 12px
    opacity: 0,                // 3. PRŮHLEDNOST: Začíná plně průhledný
    duration: 1.4,             // Délka animace
    ease: "power3.out",        // Typ "uvolnění" animace
    stagger: 0.2              // Zpoždění 0.1s mezi animací jednotlivých slov
});

  gsap.registerPlugin(ScrollTrigger);

  gsap.to(".scroll-text span", {
    scrollTrigger: {
      trigger: ".scroll-text",
      start: "top 80%",
      end: "bottom 20%",
      scrub: true
    },
    color: "#000",       // z šedé na černou
    stagger: 0.2,        // postupně slovo po slově
    ease: "none"
  });
  </script>
</body>
</html>
